### v1:
请你遵循任务执行规则，对本项目进行重构，具体完成以下任务：
1. 使用工具函数(写在util/functools.py中)判断当前是否交易日
2. 修改选股脚本(select.py)涨停股的筛选逻辑:
    - 如果今天是交易日:
        - 如果当前时间是盘前，则筛选上一个交易日是首板的股票：
            - 上个交易日首板，是指上上个交易日没有涨停，但是上一个交易日涨停。
        - 如果当前时间是盘中，则筛选出当前交易日首板的股票。
            - 当前交易日首板，是指当前交易日处于涨停涨停，但是上一个交易日没有涨停。
        - 如果当前时间是盘后，则筛选今日首板的股票：
            - 今日首板，是指今日涨停，但是昨日没有涨停。
        - 保存筛选结果到data/firstlimit.csv
    - 如果今天不是交易日，则筛选上个交易日首板的股票:
        - 上个交易日首板，是指上上个交易日没有涨停，但是上一个交易日涨停。
3. 交易执行模块(trade.py)中包含很多历史遗留的冗余代码，比如选股相关的代码。
    - 这些代码需要被移除，只保留交易执行的逻辑。

### v2:
对于在非交易日的情况，判断首板的逻辑需要修正：
1. 因为QMT库下载存储历史交易数据的时候，会忽略掉非交易日。也就是说对于历史数据，以日k线数据为举例，它是连续的交易日的数据，期间没有夹杂非交易日的条目。
2. 因此，假如当前是非交易日，xtdata库数据接口获取到的数据，它最近的一条(dataframe.iloc[-1])就是上个交易日的数据。所以首板的算法伪代码如下：
```
上个交易日K数据 = df.iloc[-1]
上上个交易日k数据 = df.iloc[-2]
上上上个交易日k数据 = df.iloc[-3]
上个交易日涨幅 = 上个交易日K数据['close'] / 上上个交易日k数据['close'] - 1
上上个交易日涨幅 = 上上个交易日k数据['close'] / 上上上个交易日k数据['close'] - 1
if 上个交易日涨幅 >= 所属市场涨停幅度 and 上上个交易日涨幅 < 所属市场涨停幅度:
    上个交易日是首板 = True
else:
    上个交易日是首板 = False
```

### v3:
在筛选出来的首板股票当中，还包含少量的股票，是这种情况：在收盘那一刻，盘口的卖一档，还有卖单。现在需要你做的是：
1. 在选股逻辑当中，筛选出首板股票之后，再判断一下，当前股票的盘口卖一档是否有卖单。
2. 如果有卖单，那么这个股票就不是首板。需要剔除出去。

### v4:
加一个关于封单金额的策略筛选逻辑。
对于某一只股票：
1. 先获取当前股票的盘口数据。
2. 计算当前股票的封单金额 = 盘口卖一档价格 * 盘口卖一档数量。
3. 先确认当前股票的流通市值，能否从xtdata的接口获取。如果不能，则计算得到，当前股票的流通市值 = 流通量 * 当日收盘价。
4. 从xtdata接口获取当前股票的当日成交额。
5. 如果当前股票的封单金额 >= 0.03(这个比例做成配置项) * 当前股票的流通市值 and 当前股票的封单金额 >= 2(这个倍数做成配置项) * 当前股票的当日成交额:
    那么这个股票就符合我们的筛选条件。
